<script src="/upload.js"></script>
<div class="upload">
      <a>Share your image!</a>

      <form
        class="mt-4"
        action="/upload"
        method="POST"
        enctype="multipart/form-data"
      >
        <div class="form-group">
          <input
            type="file"
            name="image"
            id="input-files"
            class="form-control-file border"
          />
        </div>
        <button type="submit">Submit</button>
      </form>
    </div>
  </div>
  <hr />
      <div class="preview-images"></div>
    </div>
  </div>
</div>

<div class="floating-btn-chat">
  <a class="floating-btn-chat" href="/chat">chat</a>
</div>

<script>
  $(document).ready(function() {
    let imagesPreview = function(input, placeToInsertImagePreview) {
      if (input.files) {
        let filesAmount = input.files.length;
        for (i = 0; i < filesAmount; i++) {
          let reader = new FileReader();
          reader.onload = function(event) {
            $($.parseHTML("<img>"))
              .attr("src", event.target.result)
              .appendTo(placeToInsertImagePreview);
          };
          reader.readAsDataURL(input.files[i]);
        }
      }
    };
    $("#input-files").on("change", function() {
      imagesPreview(this, "div.preview-images");
    });
  });

</script>